<%-include('partials/header', {pagetitle: "Home"})-%>
<%-include('partials/navbar')-%>




<div class="w-75 mx-auto mt-5 mb-5" id="calendar"></div>

<script type="text/javascript">
  let eventItems = []
  <% eventsArray.forEach(element => { %>
    eventItems.push({
      "title": "<%=element.title%>",
      "url": "<%=element.url%>",
      "start": "<%=element.start%>"
    })
  <% }) %>


  console.log(eventItems)


  document.addEventListener('DOMContentLoaded', function() {
  var calendarEl = document.getElementById('calendar');

  const date = new Date();

  date.setHours(0, 0, 0, 0);


  function padTo2Digits(num) {
    return num.toString().padStart(2, '0');
  }

  function formatDate(date) {
    return [
      date.getFullYear(),
      padTo2Digits(date.getMonth() + 1),
      padTo2Digits(date.getDate()),
    ].join('-');
  }

  console.log(formatDate(new Date()));




  var calendar = new FullCalendar.Calendar(calendarEl, {
    initialView: 'dayGridMonth',
    initialDate: formatDate(new Date()),
    headerToolbar: {
      left: 'prev,next today',
      center: 'title',
      right: 'dayGridMonth,listMonth'
    },
    dayMaxEventRows: true,
  views: {
    timeGrid: {
      dayMaxEventRows: 9
    }
  },
    events: eventItems
  });

  calendar.render();
});
</script>





<%-include('partials/footer')-%>
